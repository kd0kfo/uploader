<!DOCTYPE html>
<html>
<head>
<title>Make a directory</title>
<script src="//code.jquery.com/jquery-1.10.2.min.js" language="javascript"></script>
<script type="text/javascript" src="//crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha256.js"></script><script type="text/javascript" src="//crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js"></script>
<script src="site.js" language="javascript"></script>
<script src="fs.js" language="javascript"></script>
</head>
<body>
<form action="mkdir.php" id="mkdirAction">
<label for="file">Directory Name:</label>
<input type="text" name="dirname" id="dirname"><br>
<input type="submit" name="submit" value="Submit" id="submitbutton"/>
</form>
<div id="result"></div>
<div id="footer"></div>
</body>
<script>
$(document).ready(function() {
	if(!localStorage['username'] || !localStorage['sessionkey']) {
		$("#mkdirAction").hide();
		$("#result").text("Login required.");
	}
});

$("#footer").html(site_footer());
$("#mkdirAction").submit(function(event) {
	event.preventDefault();

	var form = $(this);
	var dirname = form.find("input[name='dirname']").val();
	var url = form.attr("action");

	var username = localStorage['username'];
	var sessionkey = localStorage['sessionkey'];
	var sig = hash(dirname, sessionkey);

	var result = $.post(url, {dirname: dirname, username: username, signature: sig});

	result.done(function(data) {
		var json = jQuery.parseJSON(data);
		$("#result").empty().append(json.message);
	});

});
</script>
</html>

